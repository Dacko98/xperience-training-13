@using MedioClinic.ViewComponents
@model MedioClinic.Models.ViewComponents.Navigation.TopNavigationContentsModel

@{
    var navigationItems = Model?.NavigationItem?.ChildItems;
}

<ul id="@Model?.MainId" class="@Model?.ListClass">
    @{
        var triggerViewName = $"{Navigation.PartialViewPath}/_DropdownTrigger";
    }

    @if (navigationItems != null && navigationItems.Any())
    {
        foreach (var item in navigationItems)
        {
            if (Model?.DisplaySecondLevel == true && item.ChildItems != null && item.ChildItems.Any())
            {
                var childItemDtos = item.ChildItems.Select(item => (item.RelativeUrl, item.Title));
                <partial name="@triggerViewName" model="@(Guid.NewGuid().ToString(), item.Title, childItemDtos)" />
            }
            else
            {
                <partial name="_ListItemWithLink" model="@(item.RelativeUrl, item.Title)" />
            }
        }
    }

    @if (Model?.CultureSwitchId != null)
    {
        <vc:language culture-switch-id="@Model?.CultureSwitchId" />
    }
</ul>
